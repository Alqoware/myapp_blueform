NEW WEBHOOK QUERY
___________________

function getChatMessages() {
    let messages = [];
    document.querySelectorAll(".message-header").forEach((msg) => {
        let author = msg.querySelector(".message-author .name").textContent.trim();
        let date = msg.querySelector(".message-date").textContent.trim();
        let text = msg.nextElementSibling?.textContent.trim() || ""; // Message body

        messages.push({
            author: author,
            date: date,
            text: text
        });
    });
    return messages;
}

function sendToMake() {
    let chatMessages = getChatMessages();

    fetch("https://hook.eu2.make.com/hrf5gelpwb3pm725h5lm471uui35sjb1", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ messages: chatMessages })
    })
    .then(response => {
        return response.text(); // Read response as text instead of JSON
    })
    .then(data => {
        console.log("Response from Make.com:", data); // Should log "Accepted"
    })
    .catch(error => console.error("Error:", error));
}

sendToMake(); // Run when the page loads


